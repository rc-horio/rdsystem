@import "tailwindcss";

/* =========================
   number入力のスピンボタン非表示
   ========================= */

/* Chrome / Edge / Safari（WebKit系）でスピンを非表示 */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none; /* ブラウザ標準の見た目を無効化 */
  margin: 0; /* 余白によるレイアウト崩れ防止（保険） */
}

/* Firefox で number input を textfield 扱いにしてスピンを非表示 */
input[type="number"] {
  -moz-appearance: textfield; /* Firefox向け */
  appearance: textfield; /* 標準プロパティ（将来/他ブラウザ向け保険） */
}

/* =========================
   Safe Area（PWA / ノッチ）対応
   ========================= */

/* iPhone 等のノッチ領域を CSS 変数として定義 */
:root {
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
}

/* iOS Safari / PWA の Safe Area（ノッチ等）を考慮した余白クラス */
.pt-safe {
  padding-top: var(--safe-top);
}
.pb-safe {
  padding-bottom: var(--safe-bottom);
}
.px-safe {
  padding-left: var(--safe-left);
  padding-right: var(--safe-right);
}

/* =========================
   全体（ベース）スタイル
   ========================= */
@layer base {
  /* アプリの土台：高さを100%にして全画面レイアウトしやすくする */
  html,
  body,
  #root {
    height: 100%;
    background-color: #000a1b; /* 全体の背景色（アプリの地色） */
    color: #fff; /* 全体の文字色（デフォルト） */
  }

  /* iOS等の"引っ張り更新/バウンス"による挙動を抑える */
  html,
  body {
    overscroll-behavior-y: none;
    overscroll-behavior: none;
  }
}

/* =========================
   iOS 入力フォーカス時ズーム対策
   ========================= */

/* iOS Safari は input 等の font-size が小さいとフォーカス時にズームすることがあるため、
   16px に固定してズームを抑止する目的 */
input,
select,
textarea {
  font-size: 16px;
}

/* iOS のテキスト自動拡大（勝手に文字が大きくなる）を抑える */
html {
  -webkit-text-size-adjust: 100%;
}

/* =========================
   スクロールバーのスタイル（Mac/iPad対応）
   ========================= */

/* WebKit系（Chrome, Safari, Edge等）用スクロールバー */
*::-webkit-scrollbar {
  width: 12px; /* 縦スクロールバーの幅 */
  height: 12px; /* 横スクロールバーの高さ */
}

*::-webkit-scrollbar-track {
  background: rgba(30, 41, 59, 0.3); /* slate-800/30 相当 */
  border-radius: 6px;
}

*::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.6); /* slate-400/60 相当 */
  border-radius: 6px;
  border: 2px solid rgba(30, 41, 59, 0.3); /* トラックとの間に境界線 */
}

*::-webkit-scrollbar-thumb:hover {
  background: rgba(148, 163, 184, 0.8); /* ホバー時は濃く */
}

*::-webkit-scrollbar-thumb:active {
  background: rgba(148, 163, 184, 1); /* クリック時はさらに濃く */
}

/* Firefox用スクロールバー */
* {
  scrollbar-width: thin; /* 'auto' | 'thin' | 'none' */
  scrollbar-color: rgba(148, 163, 184, 0.6) rgba(30, 41, 59, 0.3); /* thumb track */
}

/* =========================
   レイアウト補助
   ========================= */

/* 画面全体を占有するレイアウト用（100vh より安定する 100dvh を使う） */
.app-fullscreen {
  min-height: 100dvh;
}

/* Safe Area を考慮しつつ、最低限の余白も確保するための補助クラス */
.safe-paddings {
  padding-left: max(env(safe-area-inset-left), 1rem);
  padding-right: max(env(safe-area-inset-right), 1rem);
  padding-top: max(env(safe-area-inset-top), 0.5rem);
  padding-bottom: max(env(safe-area-inset-bottom), 0.5rem);
}

/* =========================
   Tailwind Utilities 追加
   ========================= */
@layer utilities {
  /* キャレット非表示用途と合わせて「編集不可っぽい」挙動にするユーティリティ */
  .no-caret {
    @apply cursor-default select-none;
  }
}

/* =========================
   caret（入力カーソル）制御：編集モード切替
   ========================= */

/* 編集OFF: 全要素でキャレットを透明化（読み取り専用の見た目に寄せる） */
[data-edit="false"] * {
  caret-color: transparent !important;
}

/* 編集ON: 基本は透明（保険）にしつつ… */
[data-edit="true"] * {
  caret-color: transparent;
}

/* 編集ON: 入力要素だけキャレットを戻す（実際に入力できるようにする） */
[data-edit="true"] input,
[data-edit="true"] textarea {
  caret-color: auto !important;
}

/* =========================
   トーストアニメーション
   ========================= */
@keyframes toast-in {
  from {
    opacity: 0;
    transform: translateY(-12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.animate-toast-in {
  animation: toast-in 0.25s ease-out forwards;
}

/* =========================
   UI tokens
   ========================= */
/* 入力系の共通スタイル定義 */
:root {
  --ui-input-bg: #211c1c;
  --ui-border: #707070;
  --ui-text: #e5e7eb; /* slate-200 相当（react-selectで使用） */
  --ui-placeholder: #94a3b8; /* slate-400 相当 */
}

/* =========================
   共通フォーム部品（現行デザイン固定）
   ========================= */
@layer components {
  /* InputBox と同等 */
  .ui-input {
    @apply h-9 w-full rounded px-3 py-1 text-slate-100 placeholder:text-slate-200 placeholder:font-light focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition;
    border-width: 0.5px;
    border-style: solid;
    border-color: var(--ui-border);
    background-color: var(--ui-input-bg);
    font-size: 14px !important; /* text-sm! と同等 */
    line-height: 1 !important; /* leading-none と同等 */
  }

  /* DisplayOrTextarea の外殻（枠＋余白） */
  .ui-field-shell {
    @apply rounded px-3 py-1;
    border-width: 0.5px;
    border-style: solid;
    border-color: var(--ui-border);
    background-color: transparent;
  }
  .ui-field-shell--edit {
    background-color: var(--ui-input-bg) !important; /* bg[#211C1C]! と同等 */
  }

  /* Textarea 内側（編集ON） */
  .ui-textarea {
    @apply w-full h-full min-h-0 resize-none bg-transparent outline-none;
    @apply border-transparent px-0 py-0;
    @apply text-slate-100 placeholder:text-slate-200;
    font-size: 14px !important;
    line-height: 1 !important;
  }

  /* Textarea 表示（編集OFF） */
  .ui-textarea-readonly {
    @apply w-full h-full overflow-y-auto whitespace-pre-wrap cursor-default select-none caret-transparent;
    color: rgb(226 232 240) !important; /* text-slate-200! と同等 */
    font-size: 14px !important;
    line-height: 1 !important;
  }

  /* DisplayOrSelect 編集OFFの外枠（見た目固定） */
  .ui-readonly-box {
    @apply flex items-center h-9 rounded px-3 cursor-default select-none caret-transparent focus:outline-none focus:ring-0;
    border-width: 0.5px;
    border-style: solid;
    border-color: var(--ui-border);
    font-size: 14px !important;
    line-height: 1 !important;
  }
}
